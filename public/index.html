<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>公開メモ帳 (htmx版)</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
    <script src="https://unpkg.com/htmx.org@1.9.10" defer></script>
</head>
<body>
  <main class="container">
    <h1>公開メモ帳 (htmx版)</h1>
    
    <form
      hx-post="https://${SUPABASE_PROJECT_REF}.supabase.co/functions/v1/create-memo"
      hx-target="#memos-container"
      hx-swap="afterbegin"
      hx-headers='{
        "apikey": "${SUPABASE_ANON_KEY}",
        "Authorization": "Bearer ${SUPABASE_ANON_KEY}"
      }'
    >
      <textarea name="content" required placeholder="メモを入力..."></textarea>
      <button type="submit">投稿する</button>
    </form>

    <div
      id="memos-container"
      hx-get="https://${SUPABASE_PROJECT_REF}.supabase.co/functions/v1/get-memos"
      hx-trigger="load"
      hx-headers='{
        "apikey": "${SUPABASE_ANON_KEY}",
        "Authorization": "Bearer ${SUPABASE_ANON_KEY}"
      }'
    >
      <p>読み込み中...</p>
    </div>
  </main>
</body>
</html>
